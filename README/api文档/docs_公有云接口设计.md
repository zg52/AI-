## 公有云接口设计

#### 注册登录

##### 1. 发送手机验证码

**请求参数:**

| 参数名 | 类型   | 是否必填 | 说明   |
| ------ | ------ | -------- | ------ |
| mobile | string | 是       | 手机号 |

##### 2. 判断用户名是否已存在

**请求参数:**

| 参数名   | 类型   | 是否必填 | 说明   |
| -------- | ------ | -------- | ------ |
| username | string | 是       | 用户名 |

##### 3. 用户注册

**请求参数:**

| 参数名           | 类型   | 是否必填 | 说明               |
| ---------------- | ------ | -------- | ------------------ |
| username         | string | 是       | 用户名             |
| mobile           | string | 是       | 手机号             |
| verifyCode       | string | 是       | 注册验证码         |
| email            | string | 否       | 邮箱               |
| password         | string | 是       | 密码               |
| type             | string | 是       | 用户类型.个人/公司 |
| companyName      | string | 否       | 公司名称           |
| uscc             | string | 否       | 统一社会信用代码   |
| business_license | file   | 否       | 营业执照           |

##### 4. 忘记密码

**请求参数:**

| 参数名     | 类型   | 是否必填 | 说明   |
| ---------- | ------ | -------- | ------ |
| username   | string | 是       | 用户名 |
| verifyCode | string | 是       | 验证码 |
| password   | string | 是       | 密码   |

##### 5. 用户登录

**请求参数:**

| 参数名   | 类型   | 是否必填 | 说明                |
| -------- | ------ | -------- | ------------------- |
| type     | string | 是       | 类型.根用户/IAM用户 |
| username | string | 是       | 用户名/手机号/邮箱  |
| password | string | 是       | 密码                |

##### 6. 修改密码

**请求参数:**

| 参数名      | 类型   | 是否必填 | 说明   |
| ----------- | ------ | -------- | ------ |
| oldPassword | string | 是       | 旧密码 |
| newPassword | string | 是       | 新密码 |

##### 7. 修改个人资料

**请求参数:**

| 参数名   | 类型   | 是否必填 | 说明     |
| -------- | ------ | -------- | -------- |
| nickname | string | 否       | 昵称     |
| address  | string | 否       | 地址     |
| contact  | string | 否       | 联系方式 |

##### 8. 设置域名

**接口说明:** 根用户可以设置一个独有的域名.假设某个根用户的域名为hjimi.com,则其下的IAM用户的用户名默认以@加该域名结尾,例如yangerzhou@hjimi.com.

**请求参数:**

| 参数名 | 类型   | 是否必填 | 说明 |
| ------ | ------ | -------- | ---- |
| domain | string | 是       | 域名 |

##### 9. 查看个人信息

##### 10. 退出



#### IAM用户管理

##### 1. 用户列表

**请求参数:**

| 参数名   | 类型   | 是否必填 | 说明   |
| -------- | ------ | -------- | ------ |
| username | string | 否       | 用户名 |
| note     | string | 否       | 备注   |

##### 2. 添加用户

**请求参数:**

| 参数名   | 类型     | 是否必填 | 说明             |
| -------- | -------- | -------- | ---------------- |
| username | string   | 是       | 用户名           |
| password | string   | 是       | 密码             |
| nickname | string   | 是       | 昵称             |
| note     | string   | 否       | 备注             |
| contact  | string   | 否       | 联系方式         |
| products | string[] | 否       | 要开通的产品列表 |

##### 3. 查看用户

**请求参数:**

| 参数名 | 类型 | 是否必填 | 说明   |
| ------ | ---- | -------- | ------ |
| id     | long | 是       | 用户ID |

##### 4. 修改用户

**请求参数:**

| 参数名   | 类型     | 是否必填 | 说明             |
| -------- | -------- | -------- | ---------------- |
| id       | long     | 是       | 用户ID           |
| nickname | string   | 是       | 昵称             |
| note     | string   | 否       | 备注             |
| contact  | string   | 否       | 联系方式         |
| products | string[] | 否       | 要开通的产品列表 |

##### 5. 启用/禁用用户

**请求参数:**

| 参数名 | 类型   | 是否必填 | 说明      |
| ------ | ------ | -------- | --------- |
| id     | long   | 是       | 用户ID    |
| action | string | 是       | 启用/禁用 |



#### 产品相关

##### 1. 已开通产品列表

##### 2. 密钥列表

##### 3. 添加密钥

##### 4. 删除密钥

**请求参数:**

| 参数名 | 类型 | 是否必填 | 说明         |
| ------ | ---- | -------- | ------------ |
| id     | long | 是       | 密钥主键标识 |





#### 内部服务

##### 1. 验证用户身份

**接口说明:**

在具体的产品登录页,用户可选择使用云平台账户登录.各产品可以请求本接口验证云平台账户的有效性.

**接口参数:**

| 参数名   | 类型   | 是否必填 | 说明   |
| -------- | ------ | -------- | ------ |
| username | string | 是       | 用户名 |
| password | string | 是       | 密码   |